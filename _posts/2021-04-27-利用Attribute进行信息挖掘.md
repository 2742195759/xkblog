---
layout : post
title  : 利用Attribute进行RE信息挖掘
date   : 2021-04-27 21:00:00 +0000
category : phraseground
typora-copy-images-to: ../../../code/xkblog/public/img/
typora-root-url: ../../../code
---

状态： <font color='red'>设计阶段</font>

### 背景

1. 通过case study发现，其实很多时候，一些属性并没有被很好的学习。应该是大部分的noun和abs location已经可以很好的区分出物体对象。因此其他的信息被使用比较弱。
2. 颜色等的区分度其实不够高。尤其是 white 和 blue 。例如搜索blue car ，会出现很多的白色车。这个问题很奇怪。这说明即使对于简单的短语，这种类型的错误其实也有很多。
3. 观察到，在原始的方法中，添加了Attribute Predict方法，其实效果不是很好。应该是模型设计的不合理，否则会增强预测的能力。初步估计模型的走了捷径。因此希望设计出一个重复利用word emb的Attribute Branch来强化属性单词和Region的对应关系。

### 思考

1. 判断这个问题是不是瓶颈问题？这个问题是噪声还是普遍存在的现象。从原始的数据集中筛选出一个数据集，数据集中只包含简单的color + none。查看这个问题是否值得解决？

   <font color='green'>具体的带颜色的物体识别率偏低，这个的原因目前不是很清楚，但是知道这个问题是一个统计上的问题，不是针对特殊的case。而且word2region类的方法中，使用right/left等loc词的匹配准确率很高。说明网络对loc相关的单词进行了很好的匹配。</font>

2.  <font color='red'>思考具体出现上述颜色匹配异常的原因？</font>

   1. 是否因为特征的原因？使用更加低阶的特征试试？
   2. 是否1-Stage可以缓解，如果在CNN的同时就引入phrase是否可以缓解这个问题？

3. <font color='red'> 观察：部分数据集和整体数据集预测的结果都是一样的，联合训练和单独训练，精度都是差不多的，几乎一摸一样？ </font>

   1. 说明：网络拟合能力足够！train acc可以到99%，而且互不影响。
   2. 说明：网络设计原因导致网络无法很好的捕捉到“输入特征”->颜色的对应关系。因此要添加输入特征 / 更改网络结构。
   3. 说明：这个问题，应该需要添加特征/提取有效特征。而不是训练Loss的原因。因为这个问题属于输入到输出的对应关系不明显的问题。而且拟合能力也够了。

### 实验

##### 筛选subdataset

为了更好的验证[思考1](#思考)的正确性，证明这个问题确实是一个瓶颈，设计本实验

首先由于MattNet中具有的Attribute数据集可以用来筛选出一些句子的语法结果。因此我们通过筛选的方法构造了三个SubDataset数据集。这几个数据集都是通过Referit-fast数据集中选取了部分子集。筛选方法就是对sentence的单词个数和attribute中的信息进行筛选。

| 数据集     | 代码                  | 统计信息                             |
| ---------- | --------------------- | ------------------------------------ |
| color_noun | filter_color_noun:345 | 训练集合：150迭代/Epoch ； 测试450个 |
| loc_noun   | filter_loc_noun:351   | 训练集合：测试3000个                 |
|            |                       |                                      |

实验结果：

| 数据集[complete上训练] | ACC@1 |
| ---------------------- | ----- |
| color_noun             | 73%   |
| loc_noun               | 93%   |
|                        |       |

说明，当前的训练的模型，对于loc之类的单词其实具有很高的辨识度，但是至少对于颜色来说，其实不具有很好的辨识度。应该是颜色相关的低阶特征没有被提取出来。因为即使在上述数据集中进行单独训练，也很难得到有效的训练结果。训练精度99%，但是测试精度还是70%左右。因此这个问题目前看起来比较严重。70%的颜色识别率是很低的。具体原因在什么地方呢？

### 实验：低效特征？

实验思路： 添加额外的低阶层特征 / CNN网络包含进入网络 / 1-Stage？

***实验1：是否是训练问题，***

### 总结

首先弄明白问题的出现在哪：

1. 如果是两个SubDataset任务都训练的很好，但是集成到一起就训练不好。这说明可能是“任务干扰”。需要找到冲突的特征。一个方法是使用Modular的方式进行训练。
2. 欠拟合：训练的过程中网络拟合能力不足导致的错误。这个需要更改网络。
3. 过拟合：训练集合表现很好，但是测试集合表现不行。这个现象可能是“拟合过强” 。也可能是“低效特征”。低效特征+过强的拟合网络会导致过拟合现象。<font color='red'>【TODO证明：人工构造数据然后看看是否有这个情况出现】</font>

